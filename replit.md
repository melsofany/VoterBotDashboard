# نظام إدارة بيانات الناخبين - حملة المرشح علاء سليمان الحديوي

## نظرة عامة
نظام متكامل يتكون من:
1. **بوت تيليجرام** لجمع بيانات الناخبين من المندوبين الميدانيين
2. **لوحة تحكم ويب** لعرض وتحليل البيانات

## البنية التقنية

### Frontend (React + TypeScript)
- **الصفحات**:
  - `/` - لوحة التحكم الرئيسية مع الإحصائيات والرسوم البيانية
  - `/voters` - قائمة الناخبين مع البحث والتفاصيل
  - `/representatives` - إدارة المناديب وأدائهم
  - `/analytics` - تحليلات متقدمة

- **المكونات الرئيسية**:
  - `DashboardLayout` - التخطيط الأساسي مع التنقل
  - جميع المكونات تدعم اللغة العربية (RTL)

### Backend (Node.js + Express)
- **Telegram Bot**: جمع البيانات من المندوبين
- **API Routes**: نقاط نهاية للواجهة الأمامية
- **Google Sheets Integration**: حفظ البيانات
- **Google Drive Integration**: رفع صور البطاقات
- **OCR Integration**: استخراج البيانات من صور البطاقات

## تدفق عمل البوت

1. **التحقق من الهوية**: المندوب يرسل /start، البوت يتحقق من معرّفه
2. **رفع البطاقة**: المندوب يرسل صورة بطاقة الناخب
3. **OCR**: استخراج تلقائي للرقم القومي والاسم
4. **الموقع**: مشاركة موقع الناخب
5. **المعلومات الإضافية**: اسم العائلة، رقم الهاتف
6. **الموقف السياسي**: مؤيد/معارض/محايد
7. **الحفظ**: رفع الصورة لـ Drive وحفظ البيانات في Sheets

## نموذج البيانات

### Voters (الناخبون)
- id, nationalId, fullName, familyName, phoneNumber
- latitude, longitude (الموقع)
- stance (الموقف: supporter/opponent/neutral)
- idCardImageUrl (رابط صورة البطاقة)
- representativeId, representativeName
- createdAt

### Representatives (المناديب)
- userId (معرّف التيليجرام)
- name (اختياري)
- totalVoters, lastActiveAt

## المتغيرات البيئية المطلوبة

```
TELEGRAM_BOT_TOKEN=...
GOOGLE_SHEET_ID=...
GOOGLE_DRIVE_FOLDER_ID=...
```

## إعداد Google Sheets

يجب إنشاء ورقتين في ملف Google Sheets:

### ورقة "Representatives"
| user_id   | name        |
|-----------|-------------|
| 123456789 | أحمد محمد   |
| 987654321 | محمود علي   |

### ورقة "Voters"
يتم ملؤها تلقائياً من البوت

## التشغيل

```bash
npm install
npm run dev
```

البوت سيبدأ تلقائياً ولوحة التحكم ستكون متاحة على المنفذ 5000.

## الميزات الرئيسية

### لوحة التحكم
- ✅ إحصائيات شاملة (إجمالي، مؤيد، معارض، محايد)
- ✅ رسوم بيانية تفاعلية
- ✅ قائمة ناخبين مع بحث متقدم
- ✅ تفاصيل كل ناخب مع الصورة والموقع
- ✅ إحصائيات المناديب
- ✅ تحليلات حسب العائلات
- ✅ دعم كامل للغة العربية (RTL)

### بوت التيليجرام
- ✅ تحقق أمني من هوية المندوبين
- ✅ استخراج تلقائي للبيانات من البطاقات (OCR)
- ✅ التحقق من صحة البيانات
- ✅ رفع تلقائي للصور على Drive
- ✅ حفظ فوري في Sheets
- ✅ واجهة سهلة وسلسة

## التصميم

- نظام Material Design
- خط Cairo للعربية
- دعم وضع داكن/فاتح تلقائي
- تجاوب كامل مع جميع الأجهزة
- تنقل سفلي للموبايل، جانبي للديسكتوب
